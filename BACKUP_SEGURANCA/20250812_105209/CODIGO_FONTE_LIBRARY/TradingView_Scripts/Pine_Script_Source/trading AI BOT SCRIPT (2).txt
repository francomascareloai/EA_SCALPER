 //@version=4
study(title="trading AI BOT", shorttitle="Trading AI BOT buy sell", format=format.price, precision=4, overlay=true)

signal_length = input(title="Signal Smoothing", type=input.integer, minval=1, maxval=200, defval=11)
sma_signal = input(title="Simple MA (Signal Line)", type=input.bool, defval=true)

lin_reg = input(title="Lin Reg", type=input.bool, defval=true)
linreg_length = input(title="Linear Regression Length", type=input.integer, minval=1, maxval=200, defval=11)

bopen = lin_reg ? linreg(open, linreg_length, 0) : open
bhigh = lin_reg ? linreg(high, linreg_length, 0) : high
blow = lin_reg ? linreg(low, linreg_length, 0) : low
bclose = lin_reg ? linreg(close, linreg_length, 0) : close

r = bopen < bclose

signal = sma_signal ? sma(bclose, signal_length) : ema(bclose, signal_length)

candle_color = r ? color.green : color.red

plotcandle(bopen, bhigh, blow, bclose, title="LinReg Candles", color=candle_color, wickcolor=candle_color, bordercolor=candle_color, editable=true)

plot(signal, color=color.white)

// Add buy and sell labels
buy_signal = crossover(bclose, bopen)
sell_signal = crossunder(bclose, bopen)

plotshape(buy_signal, title="Buy", location=location.belowbar, color=color.green, style=shape.labelup, textcolor=color.white, text="Buy")
plotshape(sell_signal, title="Sell", location=location.abovebar, color=color.red, style=shape.labeldown, textcolor=color.white, text="Sell")
