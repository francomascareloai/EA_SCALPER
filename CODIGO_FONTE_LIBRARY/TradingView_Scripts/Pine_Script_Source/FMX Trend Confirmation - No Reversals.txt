//@version=5
indicator("FMX Trend Confirmation - No Reversals", overlay=true)

higherTF = "15"
htfClose = request.security(syminfo.tickerid, higherTF, close)
htfHigh = request.security(syminfo.tickerid, higherTF, high)
htfLow = request.security(syminfo.tickerid, higherTF, low)

// Detect Liquidity Sweep (grab) logic
liquidityTakenHigh = ta.highest(high, 5)[1] < high and close < high
liquidityTakenLow = ta.lowest(low, 5)[1] > low and close > low

// Detect structure shift using HTF trend
isBullishTrend = htfClose > ta.sma(htfClose, 20)
isBearishTrend = htfClose < ta.sma(htfClose, 20)

// Candle close inside liquidity range (sweep valid)
candleCloseInsideHigh = liquidityTakenHigh and close < high
candleCloseInsideLow = liquidityTakenLow and close > low

// Final entry conditions (continuation only)
validLong = isBullishTrend and liquidityTakenLow and candleCloseInsideLow
validShort = isBearishTrend and liquidityTakenHigh and candleCloseInsideHigh

// Plot check signals only (no neutral)
plotshape(validLong, title="✅ Long Continuation", location=location.belowbar, style=shape.labelup, color=color.green, text="Buy")
plotshape(validShort, title="✅ Short Continuation", location=location.abovebar, style=shape.labeldown, color=color.orange, text="Sell")

// Alerts
alertcondition(validLong, title="✅ FMX Buy Confirmed", message="FMX: Valid Buy Entry Confirmed")
alertcondition(validShort, title="✅ FMX Sell Confirmed", message="FMX: Valid Sell Entry Confirmed")
 